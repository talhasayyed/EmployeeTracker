<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pie Chart (Dynamic from Backend)</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
  <style>
    body {
      background: #fff;
      font-family: "Segoe UI", sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    #piechart {
      width: 600px;
      height: 500px;
    }
  </style>
</head>
<body>
  <div id="piechart"></div>

  <script>
    async function loadChart() {
      const response = await fetch("/data1");
      const chartData = await response.json();

      const chartDom = document.getElementById("piechart");
      const myChart = echarts.init(chartDom);

      const option = {
        tooltip: { trigger: "item" },
        series: [
          {
            type: "pie",
            radius: "50%",
            center: ["50%", "50%"],
            emphasis: { focus: "self" },
            label: {
              formatter: "{b}: {c} ({d}%)",
              color: "#000"
            },
            labelLine: {
              show: true,
              lineStyle: { color: "#666" }
            },
            data: chartData.map((d, i) => ({
              name: d.name,
              value: d.value,
              itemStyle: {
                color: [
                  "rgba(135, 206, 250, 0.6)", // sky blue
                  "rgba(144, 238, 144, 0.6)", // light green
                  "rgba(255, 182, 193, 0.6)", // pink
                  "rgba(255, 255, 224, 0.6)", // light yellow
                  "rgba(221, 160, 221, 0.6)"  // plum
                ][i % 5]
              }
            }))
          }
        ]
      };

      myChart.setOption(option);
    }

    loadChart();
  </script>
</body>
</html>
